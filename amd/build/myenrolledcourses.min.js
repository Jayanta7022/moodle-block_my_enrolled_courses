define(['jquery', 'core/ajax', 'core/sortable_list'], function($, ajax, SortableList ) {
  return{
    sorting: function(){
            var ids = {};
            var courseids = [];
            var index = 0;
            new SortableList('ul#course_list_in_block');
            $('ul#course_list_in_block > *').on(SortableList.EVENTS.DROP, function(evt, info) {
                console.log(info);
            });
            $('#course_list_in_block li').each(function() {
                var id = $(this).find('.li_course').data('id');
                if(id != null && ids!= undefined ){
                    courseids[index] = id;
                    ++ index;
                }
            });
            ids.courseids = JSON.stringify(courseids);
            var promises = ajax.call([
                {
                    methodname: 'moodle_my_enrolled_courses_shorting',
                    args: ids
                }
            ])[0];

        $( ".expandable_icon" ).unbind('click');
        $( ".expandable_icon" ).click(function() {
        var icon = $( this ).text();
        $( this ).parent().parent().find( ".course_modules" ).slideToggle( "slow" );
        if( icon == '+' ) {
            $( this ).text( '-' );
        } else if( icon == '-' ) {
            $( this ).text( '+' );
        }
    });
    },
    disablebutten: function(){
      $('#hide').attr('disabled', 'disabled');
      $('#visible').change(function() {
          $('#hide').removeAttr('disabled');
      });

      $('#show').attr('disabled', 'disabled');
      $('#hidden').change(function() {
          $('#show').removeAttr('disabled');
      });
    }
  };
});